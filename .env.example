# Wegweiser Environment Configuration Example
# Copy this file to .env and fill in your specific values
# SECURITY WARNING: Do not commit .env files with real secrets to version control!

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# Application directory
APP_DIR=/opt/wegweiser

# Application user and group (for systemd services)
APP_USER=www-data
APP_GROUP=www-data

# Secret key for session encryption (generate a random 32-character string)
SECRET_KEY=your-secret-key-here-change-this

# API key for external integrations
API_KEY=your-api-key-here-change-this

# Flask port
FLASK_PORT=5000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

DB_NAME=wegweiser
DB_USER=wegweiser
DB_PASSWORD=secure-password-change-this
DB_HOST=localhost
DB_PORT=5432

# PostgreSQL connection string (auto-generated from above if using local setup)
DATABASE_URL=postgresql://wegweiser:secure-password-change-this@localhost:5432/wegweiser
SQLALCHEMY_DATABASE_URI=postgresql://wegweiser:secure-password-change-this@localhost:5432/wegweiser

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=  # Leave empty if no password

# Celery broker and result backend URLs
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ============================================================================
# SECRET STORAGE CONFIGURATION
# ============================================================================

# Secret storage backend: local, azure, openbao, env
SECRET_STORAGE=local

# --- Azure Key Vault Configuration ---
# Only needed if SECRET_STORAGE=azure
AZURE_KEY_VAULT_ENDPOINT=https://your-keyvault.vault.azure.net/
AZURE_KEYVAULT_NAME=your-keyvault
AZURE_USE_KEYVAULT=false

# --- OpenBao Configuration ---
# Only needed if SECRET_STORAGE=openbao
OPENBAO_ADDR=http://localhost:8200
OPENBAO_TOKEN=your-openbao-token-here
OPENBAO_SECRET_PATH=secret/wegweiser
OPENBAO_VERIFY_SSL=true

# ============================================================================
# AI PROVIDER CONFIGURATION
# ============================================================================

# AI Provider: azure, openai, anthropic, ollama
AI_PROVIDER=openai

# --- Azure OpenAI Configuration ---
AZURE_OPENAI_API_KEY=your-azure-openai-key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_DEPLOYMENT=gpt-4o

# --- OpenAI Configuration ---
OPENAI_API_KEY=sk-your-openai-key
OPENAI_MODEL=gpt-4o
OPENAI_ORG_ID=

# --- Anthropic Claude Configuration ---
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# --- Ollama Configuration ---
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama2

# ============================================================================
# AZURE AUTHENTICATION & SERVICES
# ============================================================================

# Azure AD OAuth Configuration (for Single Sign-On)
AZURE_TENANT_ID=your-tenant-id
AZURE_CLIENT_ID=your-client-id
AZURE_CLIENT_SECRET=your-client-secret
AZURE_REDIRECT_URI=https://yourapp.com/auth/microsoft/callback

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================

MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-email-password
MAIL_DEFAULT_SENDER=noreply@example.com

# ============================================================================
# STRIPE PAYMENT CONFIGURATION
# ============================================================================

STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# ============================================================================
# RECAPTCHA CONFIGURATION
# ============================================================================

RECAPTCHA_PUBLIC_KEY=your-recaptcha-public-key
RECAPTCHA_PRIVATE_KEY=your-recaptcha-private-key

# ============================================================================
# INTEGRATIONS
# ============================================================================

# Zammad Support Desk Integration
SUPPORTDESK_API_TOKEN=your-zammad-api-token
ZAMMAD_API_TOKEN=your-zammad-api-token

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Remote logging (optional)
REMOTE_LOGGING_ENABLED=false
REMOTE_LOGGING_SERVER=localhost
REMOTE_LOGGING_PORT=6379
REMOTE_LOGGING_PASSWORD=
REMOTE_LOGGING_TIMEOUT=2
REMOTE_LOGGING_RETRY_COUNT=1

# Device health score logging
LOG_DEVICE_HEALTH_SCORE=false

# ============================================================================
# IP BLOCKER CONFIGURATION
# ============================================================================

# Use Redis for IP blocking (recommended for distributed systems)
IP_BLOCKER_USE_REDIS=false
IP_BLOCKER_USE_LMDB=true
IP_BLOCKER_REDIS_HOST=localhost
IP_BLOCKER_REDIS_PORT=6379
IP_BLOCKER_REDIS_PASSWORD=

# ============================================================================
# HTTPS & DOMAIN CONFIGURATION
# ============================================================================

USE_HTTPS=false
DOMAIN=example.com

# ============================================================================
# ADMIN USER CONFIGURATION
# ============================================================================

# These are used during initial setup
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=secure-password-change-this
ADMIN_CREATE_ON_STARTUP=false
