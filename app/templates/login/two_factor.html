<!DOCTYPE html>
<!-- Filepath: app/templates/login/two_factor.html -->
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two-Factor Authentication - Wegweiser</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon-32x32.png') }}" type="image/png">
    <script src="{{ url_for('static', filename='js/compass-tracker.js') }}"></script>
</head>

<body class="auth-page">
    <!-- Floating particles background -->
    <div class="auth-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
        <div class="particle particle-6"></div>
    </div>

    <!-- Central Notification Container -->
    <div id="notification-container" class="notification-container auth-notifications">
        {% for notification in get_all_notifications() %}
        {{ notification|safe }}
        {% endfor %}
    </div>

    <div class="auth-card">
        <!-- Mascot Character -->
        {% include 'components/mascot-guide.html' %}

        <img src="{{ url_for('static', filename='images/logo1.png') }}" alt="Wegweiser Logo" class="auth-logo">
        <h2>Two-Factor Authentication</h2>

        <form method="POST">
            {{ form.hidden_tag() }}
            <input type="text" name="website" id="website" value="" style="position:absolute;left:-9999px;width:1px;height:1px;" tabindex="-1" autocomplete="off" aria-hidden="true">
            
            <div class="auth-form-group">
                <label for="token">Authentication Code</label>
                {{ form.token(class_="auth-form-control", id="token", placeholder="Enter 6-digit code",
                autofocus=true) }}
                <i class="fas fa-shield-alt auth-form-icon"></i>
                {% if form.token.errors %}
                {% for error in form.token.errors %}
                <div class="text-danger">{{ error }}</div>
                {% endfor %}
                {% endif %}
            </div>
            {{ form.submit(class_="auth-btn auth-btn-primary") }}
        </form>

        <div class="text-center mt-4">
            <small class="text-muted">Lost access to your authenticator app?</small>
            <br>
            <a href="{{ url_for('two_factor_bp.backup_code') }}" class="auth-link">Use backup code</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
</body>

</html>