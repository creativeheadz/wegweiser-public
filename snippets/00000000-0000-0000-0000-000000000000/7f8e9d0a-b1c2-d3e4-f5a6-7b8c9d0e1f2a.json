{"settings": {"snippetUuid": "7f8e9d0a-b1c2-d3e4-f5a6-7b8c9d0e1f2a", "snippetname": "Replace Agent Logging - Fix ANSI Codes", "snippettype": ".py", "created_at": 1761224292}, "payload": {"payloadsig": "ZulPb6AisCi8GLk/L7B+T06TDRijr55cbn+rwpJfGE37NWc4OcDryI0GsJTNEFIvHUaturT0Qw3SkHgAD2wAa44w0jvgWqIEEume/9dFb3hshCP0g83aHbVNC2cqPzNkG4NMtLliuzxfvHQ/HD0xseHrau9zoBBn9JBuVIexuOkhXkfVJw4jpuO8aOn1XbXWgesQVGfc46Mp2q4xgJpIaggTeV4GjwuZ0KXWqIWnKHGtsxd1iKLwHP6eVy3G+pJuS8fs81nrEdBDwmLdIZJUUHbRiM3qUH17Xeew9fF45yRAPaXrYJJB6QXzBQEY/MTbfGZ3pdV5zbNz2OI8q2sLAi2ph35xR5/HGX/BsNUCEaCg6UA1jYNfIa2JqRk7q0XiXFxMHt6Kq58h3/P0zJKgObYRkI3XJXJWjiE8eWLaX3QMry6hqkiTBiuR7LqK8iI+4mPHh047QQ0wByjhwS8a7D3t0hLU7uJBfBfU4hyQ1cVCHyzCDijsDHbBXI3uQS1eOZVr2OVUX3P5MA1wXATloa+UODn8hIrrV+vfVLHMnom4UCQnYou93q4W4imFmYZwRg2mPKnBjkLVaejIGcIq1NIgQKVcm8oF4jPtshZscD/TVBU3Bdx0k9lGWsTS2pv7RbgIP1wA+JCoG3ybUXmq/u2yiJE7QoBv7hTvzPx87kk=", "payloadb64": "IiIiClNuaXBwZXQ6IFJlcGxhY2UgQWdlbnQgTG9nZ2luZyAtIERpcmVjdCBmaWxlIHJlcGxhY2VtZW50ClJlcGxhY2VzIGFnZW50LnB5IHdpdGggY29ycmVjdGVkIHZlcnNpb24gdGhhdCBoYXMgbm8gQU5TSSBjb2xvciBjb2RlcwoiIiIKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHBsYXRmb3JtCmltcG9ydCBzaHV0aWwKCmRlZiByZXBsYWNlX2FnZW50X2xvZ2dpbmcoKToKICAgICIiIlJlcGxhY2UgYWdlbnQucHkgd2l0aCBjb3JyZWN0ZWQgdmVyc2lvbiIiIgoKICAgIGlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJzoKICAgICAgICBhZ2VudF9wYXRoID0gJ2M6XFxwcm9ncmFtIGZpbGVzICh4ODYpXFxXZWd3ZWlzZXJcXEFnZW50XFxjb3JlXFxhZ2VudC5weScKICAgICAgICBiYWNrdXBfcGF0aCA9IGFnZW50X3BhdGggKyAnLmJhY2t1cCcKICAgIGVsc2U6CiAgICAgICAgYWdlbnRfcGF0aCA9ICcvb3B0L1dlZ3dlaXNlci9BZ2VudC9jb3JlL2FnZW50LnB5JwogICAgICAgIGJhY2t1cF9wYXRoID0gYWdlbnRfcGF0aCArICcuYmFja3VwJwoKICAgIHByaW50KGYnW0lORk9dIFJlcGxhY2luZyBhZ2VudCBhdDoge2FnZW50X3BhdGh9JykKCiAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoYWdlbnRfcGF0aCk6CiAgICAgICAgcHJpbnQoZidbRVJST1JdIEFnZW50IGZpbGUgbm90IGZvdW5kJykKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAjIENyZWF0ZSB0aGUgY29ycmVjdGVkIGZvcm1hdHRlciBjb2RlCiAgICBjb3JyZWN0ZWRfY29kZSA9ICcnJ2NsYXNzIFN0cnVjdHVyZWRMb2dGb3JtYXR0ZXIobG9nZ2luZy5Gb3JtYXR0ZXIpOgogICAgIiIiQ3VzdG9tIGZvcm1hdHRlciB3aXRoIHN0cnVjdHVyZWQgYWxpZ25lZCBjb2x1bW5zIiIiCgogICAgTEVWRUxfV0lEVEggPSA4CiAgICBNT0RVTEVfV0lEVEggPSAzMAoKICAgIGRlZiBmb3JtYXQoc2VsZiwgcmVjb3JkKToKICAgICAgICAiIiJGb3JtYXQgbG9nIHJlY29yZCB3aXRoIHN0cnVjdHVyZWQgYWxpZ25lZCBjb2x1bW5zIiIiCiAgICAgICAgdGltZXN0YW1wID0gc2VsZi5mb3JtYXRUaW1lKHJlY29yZCwgIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICBsZXZlbCA9IHJlY29yZC5sZXZlbG5hbWUKCiAgICAgICAgIyBQYWQgbGV2ZWwgdG8gZml4ZWQgd2lkdGggZm9yIGNvbHVtbiBhbGlnbm1lbnQKICAgICAgICBmb3JtYXR0ZWRfbGV2ZWwgPSBmIntsZXZlbDo8e3NlbGYuTEVWRUxfV0lEVEh9fSIKCiAgICAgICAgbW9kdWxlID0gcmVjb3JkLm5hbWUKICAgICAgICBmb3JtYXR0ZWRfbW9kdWxlID0gZiJ7bW9kdWxlOjx7c2VsZi5NT0RVTEVfV0lEVEh9fSIKICAgICAgICBtZXNzYWdlID0gcmVjb3JkLmdldE1lc3NhZ2UoKQoKICAgICAgICBpZiByZWNvcmQuZXhjX2luZm86CiAgICAgICAgICAgIG1lc3NhZ2UgKz0gZiJcXG57c2VsZi5mb3JtYXRFeGNlcHRpb24ocmVjb3JkLmV4Y19pbmZvKX0iCgogICAgICAgIGxvZ19saW5lID0gKAogICAgICAgICAgICBmInt0aW1lc3RhbXB9IHwgIgogICAgICAgICAgICBmIntmb3JtYXR0ZWRfbGV2ZWx9IHwgIgogICAgICAgICAgICBmIntmb3JtYXR0ZWRfbW9kdWxlfSB8ICIKICAgICAgICAgICAgZiJ7bWVzc2FnZX0iCiAgICAgICAgKQoKICAgICAgICByZXR1cm4gbG9nX2xpbmUnJycKCiAgICB0cnk6CiAgICAgICAgIyBSZWFkIHRoZSBmaWxlCiAgICAgICAgd2l0aCBvcGVuKGFnZW50X3BhdGgsICdyJywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZjoKICAgICAgICAgICAgY29udGVudCA9IGYucmVhZCgpCgogICAgICAgICMgRmluZCB0aGUgb2xkIGZvcm1hdHRlciBjbGFzcyBhbmQgcmVwbGFjZSBpdAogICAgICAgICMgTG9vayBmb3IgdGhlIGNsYXNzIGRlZmluaXRpb24KICAgICAgICBzdGFydF9tYXJrZXIgPSAnY2xhc3MgU3RydWN0dXJlZExvZ0Zvcm1hdHRlcihsb2dnaW5nLkZvcm1hdHRlcik6JwogICAgICAgIGlmIHN0YXJ0X21hcmtlciBub3QgaW4gY29udGVudDoKICAgICAgICAgICAgcHJpbnQoJ1tFUlJPUl0gU3RydWN0dXJlZExvZ0Zvcm1hdHRlciBub3QgZm91bmQgaW4gYWdlbnQucHknKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgIyBGaW5kIHRoZSBmdWxsIGNsYXNzIGJ5IGxvb2tpbmcgZm9yIHRoZSBuZXh0IGNsYXNzIGRlZmluaXRpb24KICAgICAgICBzdGFydF9wb3MgPSBjb250ZW50LmZpbmQoc3RhcnRfbWFya2VyKQogICAgICAgIG5leHRfY2xhc3NfcG9zID0gY29udGVudC5maW5kKCdcbmNsYXNzICcsIHN0YXJ0X3BvcyArIDEpCgogICAgICAgIGlmIG5leHRfY2xhc3NfcG9zID09IC0xOgogICAgICAgICAgICBwcmludCgnW0VSUk9SXSBDb3VsZCBub3QgZmluZCBlbmQgb2YgU3RydWN0dXJlZExvZ0Zvcm1hdHRlciBjbGFzcycpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAjIFJlcGxhY2UgdGhlIGNsYXNzCiAgICAgICAgb2xkX2NsYXNzID0gY29udGVudFtzdGFydF9wb3M6bmV4dF9jbGFzc19wb3NdCiAgICAgICAgbmV3X2NvbnRlbnQgPSBjb250ZW50WzpzdGFydF9wb3NdICsgY29ycmVjdGVkX2NvZGUgKyBjb250ZW50W25leHRfY2xhc3NfcG9zOl0KCiAgICAgICAgIyBCYWNrdXAgdGhlIG9yaWdpbmFsCiAgICAgICAgc2h1dGlsLmNvcHkyKGFnZW50X3BhdGgsIGJhY2t1cF9wYXRoKQogICAgICAgIHByaW50KGYnW09LXSBCYWNrZWQgdXAgb3JpZ2luYWwgdG86IHtiYWNrdXBfcGF0aH0nKQoKICAgICAgICAjIFdyaXRlIHRoZSBjb3JyZWN0ZWQgdmVyc2lvbgogICAgICAgIHdpdGggb3BlbihhZ2VudF9wYXRoLCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUobmV3X2NvbnRlbnQpCgogICAgICAgIHByaW50KCdbT0tdIEFnZW50IGxvZ2dpbmcgZm9ybWF0dGVyIHJlcGxhY2VkIHN1Y2Nlc3NmdWxseScpCiAgICAgICAgcHJpbnQoJ1tJTkZPXSBBZ2VudCB3aWxsIHVzZSBjb3JyZWN0ZWQgZm9ybWF0dGVyIGFmdGVyIHJlc3RhcnQnKQogICAgICAgIHJldHVybiBUcnVlCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYnW0VSUk9SXSBGYWlsZWQgdG8gcmVwbGFjZSBmb3JtYXR0ZXI6IHtlfScpCiAgICAgICAgcmV0dXJuIEZhbHNlCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgc3VjY2VzcyA9IHJlcGxhY2VfYWdlbnRfbG9nZ2luZygpCiAgICBzeXMuZXhpdCgwIGlmIHN1Y2Nlc3MgZWxzZSAxKQo="}, "resigned_at": 1761308225}