{"settings": {"snippetUuid": "ed31d56a-8d71-4365-b89c-158eda9da721", "snippetname": "serverRoles", "snippettype": ".py", "created_at": 1737460808}, "payload": {"payloadsig": "g1XpsisSbL3wIUyHwx78crkIUzdbHkteYzIwjxhSLWOFgJb3EBNxtR5hBJVPZXT1K+Jb/EE27KO2WLXZjy5+mkGC3FWv0jzETjg5nVqNbZDRUeQ1NsmmG0m5Mhmmw1k4pvXRT2c5o2ua/YefHBxloHJBBBLRUA7qcDX9vD26HoDJVAjphjrvpH5cS3eIP6z3py3Z+AHry/xd6pbFNo/P87KCffUhETjZ44xrZZIpNeS+PpG+NkHqda5ul33c0taus4LEnk8QLHzTYDaEyi2MXZhELYxrUOWuKFOREIFiwzooEpwmK8qzghQAB0gtlYh59cHcdC4foLYDPh9uJtQZ9aOGqWFJFNsqGkmiPSKRst+eni99UK4MWfsA9GmMQjDh3zqRCn+2INjY9vguMy3fOZC10jIFDIic+w8V87I3Knw/c1qeGCa1G4Bu7va5L6MlbvnxArTut/A282lGTRDC5B+omWOHuSHO0842jUib9BDfDQ5owupRnVT0JhFzDglzgdZTfB3tLGUMAdDWde5wwLBpR2HdsC7fRXpGId21jAmfT/bGTSHlOCkOMhORlcUp/w6oM7Kpka6h44RNpJnKIh7986G5xViOfGQlhujlGHh3lUgjlv89r7LqRB7SCV18+z97kxSJUQIXSKquanPGLun6gHe/SMk2obiOwwajrr0=", "payloadb64": "IyBGaWxlcGF0aDogc25pcHBldHMvdW5TaWduZWQvc2VydmVyUm9sZXMucHkKaW1wb3J0IG9zCmltcG9ydCBzdWJwcm9jZXNzCmltcG9ydCBqc29uCmltcG9ydCBwbGF0Zm9ybQppbXBvcnQgcmVxdWVzdHMKCmRlZiBnZXRBcHBEaXJzKCk6CiAgICBpZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAnV2luZG93cyc6CiAgICAgICAgYXBwRGlyID0gJ2M6XFxwcm9ncmFtIGZpbGVzICh4ODYpXFxXZWd3ZWlzZXJcXCcKICAgIGVsc2U6CiAgICAgICAgYXBwRGlyID0gJy9vcHQvV2Vnd2Vpc2VyLycKICAgIGxvZ0RpciA9IG9zLnBhdGguam9pbihhcHBEaXIsICdMb2dzJywgJycpCiAgICBjb25maWdEaXIgPSBvcy5wYXRoLmpvaW4oYXBwRGlyLCAnQ29uZmlnJywgJycpCiAgICBmaWxlc0RpciA9IG9zLnBhdGguam9pbihhcHBEaXIsICdmaWxlcycsICcnKQogICAgc2NyaXB0c0RpciA9IG9zLnBhdGguam9pbihhcHBEaXIsICdTY3JpcHRzJywgJycpCiAgICB0ZW1wRGlyID0gb3MucGF0aC5qb2luKGFwcERpciwgJ1RlbXAnLCAnJykKICAgIHJldHVybihhcHBEaXIsIGxvZ0RpciwgY29uZmlnRGlyLCB0ZW1wRGlyLCBmaWxlc0Rpciwgc2NyaXB0c0RpcikKCmRlZiBnZXREZXZpY2VVdWlkKCk6CiAgICBhcHBEaXIsIGxvZ0RpciwgY29uZmlnRGlyLCB0ZW1wRGlyLCBmaWxlc0Rpciwgc2NyaXB0c0RpciA9IGdldEFwcERpcnMoKQogICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihjb25maWdEaXIsICdhZ2VudC5jb25maWcnKSkgYXMgZjoKICAgICAgICBhZ2VudENvbmZpZ0RpY3QgPSBqc29uLmxvYWQoZikKICAgIGRldmljZVV1aWQgPSBhZ2VudENvbmZpZ0RpY3RbJ2RldmljZXV1aWQnXQogICAgaWYgJ3NlcnZlckFkZHInIGluIGFnZW50Q29uZmlnRGljdDoKICAgICAgICBob3N0ID0gYWdlbnRDb25maWdEaWN0WydzZXJ2ZXJBZGRyJ10KICAgIGVsc2U6CiAgICAgICAgaG9zdCA9ICdzdGFnaW5nLndlZ3dlaXNlci50ZWNoJwogICAgcmV0dXJuKGRldmljZVV1aWQsIGhvc3QpCgpkZWYgc2VuZF9zZXJ2ZXJfcm9sZXNfYXNfdGFncyhzZXJ2ZXJfcm9sZXMsIGRldmljZV91dWlkKToKICAgIHVybCA9ICdodHRwczovL3N0YWdpbmcud2Vnd2Vpc2VyLnRlY2gvcGF5bG9hZC9zZXJ2ZXJyb2xlcycKICAgIGhlYWRlcnMgPSB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30KICAgIHBheWxvYWQgPSB7CiAgICAgICAgImRldmljZXV1aWQiOiBkZXZpY2VfdXVpZCwKICAgICAgICAiU2VydmVyUm9sZXMiOiBzZXJ2ZXJfcm9sZXMKICAgIH0KICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKHBheWxvYWQpKQogICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgIHByaW50KCJTZXJ2ZXIgcm9sZXMgc3VjY2Vzc2Z1bGx5IHNlbnQgYXMgdGFncy4iKQogICAgZWxzZToKICAgICAgICBwcmludChmIkZhaWxlZCB0byBzZW5kIHNlcnZlciByb2xlcyBhcyB0YWdzLiBTdGF0dXMgY29kZToge3Jlc3BvbnNlLnN0YXR1c19jb2RlfSIpCgojIEluaXRpYWxpemUgdmFyaWFibGVzClNDUklQVF9VUkwgPSAnaHR0cHM6Ly9zdGFnaW5nLndlZ3dlaXNlci50ZWNoL2Rvd25sb2FkL3NlcnZlcnJvbGVzLnBzMScKUFNfU0NSSVBUX1BBVEggPSByJ0M6XHRlbXBcc2VydmVycm9sZXMucHMxJwoKaWYgcGxhdGZvcm0uc3lzdGVtKCkgPT0gJ1dpbmRvd3MnOgogICAgdHJ5OgogICAgICAgICMgR2V0IGRldmljZSBVVUlEIGFuZCBob3N0CiAgICAgICAgZGV2aWNlVXVpZCwgaG9zdCA9IGdldERldmljZVV1aWQoKQogICAgICAgIAogICAgICAgICMgRG93bmxvYWQgdGhlIFBvd2VyU2hlbGwgc2NyaXB0CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoU0NSSVBUX1VSTCkKICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICMgU2F2ZSB0aGUgc2NyaXB0IHRvIHNwZWNpZmllZCBkaXJlY3RvcnkKICAgICAgICAgICAgd2l0aCBvcGVuKFBTX1NDUklQVF9QQVRILCAnd2InKSBhcyBmOgogICAgICAgICAgICAgICAgZi53cml0ZShyZXNwb25zZS5jb250ZW50KQogICAgICAgICAgICBwcmludChmIkRvd25sb2FkZWQgUG93ZXJTaGVsbCBzY3JpcHQgdG86IHtQU19TQ1JJUFRfUEFUSH0iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBSdW4gUG93ZXJTaGVsbCBzY3JpcHQKICAgICAgICAgICAgY29tbWFuZCA9IFtyJ0M6XFdpbmRvd3NcU3lzdGVtMzJcV2luZG93c1Bvd2VyU2hlbGxcdjEuMFxwb3dlcnNoZWxsLmV4ZScsICctRXhlY3V0aW9uUG9saWN5JywgJ0J5cGFzcycsICctRmlsZScsIFBTX1NDUklQVF9QQVRIXQogICAgICAgICAgICByZXN1bHQgPSBzdWJwcm9jZXNzLnJ1bihjb21tYW5kLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Rkb3V0PXN1YnByb2Nlc3MuUElQRSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml2ZXJzYWxfbmV3bGluZXM9VHJ1ZSkKICAgICAgICAgICAgcHJpbnQoZiJTVERPVVQ6IHtyZXN1bHQuc3Rkb3V0fSIpCiAgICAgICAgICAgIHByaW50KGYiU1RERVJSOiB7cmVzdWx0LnN0ZGVycn0iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBSZWFkIHRoZSBnZW5lcmF0ZWQgSlNPTiBmcm9tIHN0ZG91dAogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBzZXJ2ZXJfcm9sZXNfZGF0YSA9IGpzb24ubG9hZHMocmVzdWx0LnN0ZG91dCkKICAgICAgICAgICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yOgogICAgICAgICAgICAgICAgc2VydmVyX3JvbGVzX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgImVycm9yIjogIkZhaWxlZCB0byBwYXJzZSBKU09OIG91dHB1dCIsCiAgICAgICAgICAgICAgICAgICAgInN0ZG91dCI6IHJlc3VsdC5zdGRvdXQsCiAgICAgICAgICAgICAgICAgICAgInN0ZGVyciI6IHJlc3VsdC5zdGRlcnIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICMgUHJlcGFyZSB0aGUgbWV0YWRhdGEgcGF5bG9hZAogICAgICAgICAgICBib2R5ID0gewogICAgICAgICAgICAgICAgJ2RldmljZXV1aWQnOiBkZXZpY2VVdWlkLAogICAgICAgICAgICAgICAgJ21ldGFsb2dvc190eXBlJzogJ3NlcnZlci1yb2xlcycsCiAgICAgICAgICAgICAgICAnbWV0YWxvZ29zJzogc2VydmVyX3JvbGVzX2RhdGEKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgIyBTZW5kIHRvIHNlcnZlcgogICAgICAgICAgICB1cmwgPSBmJ2h0dHBzOi8ve2hvc3R9L2FpL2RldmljZS9tZXRhZGF0YScKICAgICAgICAgICAgaGVhZGVycyA9IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfQogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QodXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhib2R5KSkKICAgICAgICAgICAgcHJpbnQoZiJTZXJ2ZXIgcm9sZXMgZGF0YSBjb2xsZWN0ZWQgYW5kIHNlbnQuIFJlc3BvbnNlOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgU2VuZCBzZXJ2ZXIgcm9sZXMgYXMgdGFncwogICAgICAgICAgICBpZiAiU2VydmVyUm9sZXMiIGluIHNlcnZlcl9yb2xlc19kYXRhOgogICAgICAgICAgICAgICAgc2VuZF9zZXJ2ZXJfcm9sZXNfYXNfdGFncyhzZXJ2ZXJfcm9sZXNfZGF0YVsiU2VydmVyUm9sZXMiXSwgZGV2aWNlVXVpZCkKICAgICAgICAgICAgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJGYWlsZWQgdG8gZG93bmxvYWQgUG93ZXJTaGVsbCBzY3JpcHQ6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0iKQogICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIkVycm9yIGR1cmluZyBleGVjdXRpb246IHtzdHIoZSl9IikKICAgICAgICAKICAgIGZpbmFsbHk6CiAgICAgICAgIyBDbGVhbiB1cAogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKFBTX1NDUklQVF9QQVRIKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgb3MucmVtb3ZlKFBTX1NDUklQVF9QQVRIKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIkZhaWxlZCB0byBkZWxldGUgdGVtcCBzY3JpcHQ6IHtzdHIoZSl9IikKZWxzZToKICAgIHByaW50KCJOb3QgYSBXaW5kb3dzIHN5c3RlbSAtIHNlcnZlciByb2xlcyBjb2xsZWN0aW9uIHNraXBwZWQiKQ=="}, "resigned_at": 1761308227}