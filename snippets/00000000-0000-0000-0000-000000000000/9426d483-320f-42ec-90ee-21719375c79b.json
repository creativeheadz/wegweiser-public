{"settings": {"snippetUuid": "9426d483-320f-42ec-90ee-21719375c79b", "snippetname": "eventLogAudit", "snippettype": ".py", "created_at": 1730305876}, "payload": {"payloadsig": "Op+V3PC91GtK8QOyaaiRN3zfbm3he92/wqM6TkZFZZEacfVGHYdU0QGXetuudK3MTJH3EJula4o3tG4vOnXFj4IPjatGXFzWGFBklegs8rKs5beN9iu3D3fbjJHexDXQEpfoMuF9zFew81dXtQCXowBcSyiE+NBY2e5m4pmYMlbs800XIrNmMQbj/4aOMxC3aVaT8ZOy0/gJYLcmZGM6eQfKlWAZlTMKrwfSKNQdI74Vs9Dt0bJ6jHhXFyqXk7r5PJjEAj/aC+Y3Z8xNPNs99QxtMbGW9FkgHO1v9QfpTdHCG7H/vRWQnMiwHinna9M/9K0pYh0etM87s8L5FhcyWmq3Qnxl124F+g4iP2sDJAjJxSaqN8YSr3LFs1f+g+4ZvFGjC23XRJgInS/0xdjxGJTO68bqHUm71p3CRZLxTvZmvJhl5ZCchHVjwTSVH2iu9pyFtZ6SuX6zGdcQhejj2Roo2IjDSwKY2FU4TpwVp3REqJvtFQSPa2ioAudMWnbK+3dtPkpgJjt8gosPa/8ia5GZFWBggygEu+WVWacjKihfaDC+7tEb2exR3JNZFsfMX1dGSRMiwXyuqwU0LpSjXbLNtdEQLDROn/VuyVNCLS1dnfQFy0JOwRUpdNoBbo8oqE9nZTfa0N+zDhQOpIPU6dAHen0mllAnlXRQ3mkg+Mg=", "payloadb64": "IyBGaWxlcGF0aDogc25pcHBldHMvdW5TaWduZWQvZXZlbnRMb2dBdWRpdC5weQojIEZpbGVwYXRoOiBzbmlwcGV0cy91blNpZ25lZC9ldmVudExvZy1hdWRpdC5weQppbXBvcnQgcGxhdGZvcm0KZnJvbSBsb2d6ZXJvIGltcG9ydCBsb2dnZXIsIGxvZ2ZpbGUKaW1wb3J0IGRhdGV0aW1lCmltcG9ydCBvcwppbXBvcnQganNvbgppbXBvcnQgemlwZmlsZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHRpbWUKaW1wb3J0IHN5cwppbXBvcnQgc3VicHJvY2VzcwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEZVTkNUSU9OUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZiByZWFkTG9nKGxvZyk6Cglsb2dnZXIuaW5mbyhmJ1JlYWRpbmcge2xvZ30gZXZlbnQgbG9nIGZyb20gcmVjb3JkTnVtYmVyIHtsYXRlc3RFdmVudH0uLi4nKQoJb2JqZWN0TGlzdCAJPSBbXQoJaAkJCT0gd2luMzJldnRsb2cuT3BlbkV2ZW50TG9nKE5vbmUsIGxvZykKCWxvZ2dlci5kZWJ1ZyhmJ1RvdGFsIG51bWJlciBvZiByZWNvcmRzIGluIHtsb2d9IGxvZzoge3dpbjMyZXZ0bG9nLkdldE51bWJlck9mRXZlbnRMb2dSZWNvcmRzKGgpfScpCgl3aGlsZSBUcnVlOgoJCW9iamVjdHMgCT0gd2luMzJldnRsb2cuUmVhZEV2ZW50TG9nKGgsIHdpbjMyZXZ0bG9nLkVWRU5UTE9HX0JBQ0tXQVJEU19SRUFEfHdpbjMyZXZ0bG9nLkVWRU5UTE9HX1NFUVVFTlRJQUxfUkVBRCwgMCkKCQlpZiBub3Qgb2JqZWN0czoKCQkJbG9nZ2VyLmluZm8oJ0VuZCBvZiBldmVudHMuLi4nKQoJCQlicmVhawoJCWZvciBvYmplY3QgaW4gb2JqZWN0czoJCgkJCWlmIG9iamVjdC5SZWNvcmROdW1iZXIgPiBsYXRlc3RFdmVudDoKCQkJCW9iamVjdExpc3QuYXBwZW5kKG9iamVjdCkKCQkJZWxzZToKCQkJCXBhc3MKCXJldHVybihvYmplY3RMaXN0KQoKZGVmIGdldERhdGVGb3JtYXQoZGF0ZVN0cmluZyk6CglpZiAoJy0nIGluIGRhdGVTdHJpbmcpIGFuZCAoJysnIGluIGRhdGVTdHJpbmcpOgoJCWV2ZW50VGltZSA9IGRhdGV0aW1lLmRhdGV0aW1lLmZyb21pc29mb3JtYXQoZGF0ZVN0cmluZykKCWVsc2U6CgkJZXZlbnRUaW1lID0gZGF0ZXRpbWUuZGF0ZXRpbWUuc3RycHRpbWUoZGF0ZVN0cmluZywgIiViICVkICVIOiVNOiVTIikKCQlldmVudFRpbWUgPSBldmVudFRpbWUucmVwbGFjZSh5ZWFyPWRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnllYXIpCglyZXR1cm4oZXZlbnRUaW1lKQkKCmRlZiBnZXRFdmVudFZhbHVlVG9TdHJpbmcoZXZlbnRWYWx1ZSk6CglpZiBldmVudFZhbHVlID09IDA6CgkJcmV0dXJuKCdTVUNDRVNTJykKCWVsaWYgZXZlbnRWYWx1ZSA9PSAxOgoJCXJldHVybignRVJST1InKQoJZWxpZiBldmVudFZhbHVlID09IDI6CgkJcmV0dXJuKCdXQVJOSU5HJykKCWVsaWYgZXZlbnRWYWx1ZSA9PSA0OgoJCXJldHVybignSU5GT1JNQVRJT04nKQoJZWxpZiBldmVudFZhbHVlID09IDg6CgkJcmV0dXJuKCdBVURJVCBTVUNDRVNTJykKCWVsc2U6CgkJbG9nZ2VyLmluZm8oZidPVEhFUjoge2V2ZW50VmFsdWV9JykKCQlyZXR1cm4oZidPVEhFUicpCgpkZWYgZml4RXZlbnRJZChiYWRJZCk6CglpZiBiYWRJZCA8IDA6CgkJYmFkSWQgKz0gMioqMTYKCWZpeGVkRXZlbnRJZCA9IGJhZElkICYgMHhGRkZGCglyZXR1cm4gKGZpeGVkRXZlbnRJZCkJCgpkZWYgcHJvY2Vzc0V2ZW50cyhsb2csIG9iamVjdExpc3QsIGV2ZW50RGljdCk6Cglub3cgCQkJCT0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkKCXRoaXJ0eURheXNBZ28JCT0gbm93IC0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MzApCglmb3Igb2JqZWN0IGluIG9iamVjdExpc3Q6CgkJaWYgb2JqZWN0LlRpbWVHZW5lcmF0ZWQgPCB0aGlydHlEYXlzQWdvOgoJCQlsb2dnZXIuZGVidWcoZidTa2lwcGluZzoge29iamVjdC5SZWNvcmROdW1iZXJ9IHwge29iamVjdC5UaW1lR2VuZXJhdGVkfScpCgkJCWJyZWFrCgkJZWxzZToKIwkJCWxvZ2dlci5kZWJ1ZyhmJ0ZvdW5kIFJlY29yZDoge29iamVjdC5SZWNvcmROdW1iZXJ9IHwge29iamVjdC5UaW1lR2VuZXJhdGVkfSB8IHtvYmplY3QuU291cmNlTmFtZX0gfCB7b2JqZWN0LkV2ZW50SUR9IHwge2dldEV2ZW50VmFsdWVUb1N0cmluZyhvYmplY3QuRXZlbnRUeXBlKX0gfCB7d2luMzJldnRsb2d1dGlsLlNhZmVGb3JtYXRNZXNzYWdlKG9iamVjdCwgbG9nKX0nKQoJCQlldmVudERpY3Rbb2JqZWN0LlJlY29yZE51bWJlcl0gPSB7CgkJCQkndGltZWdlbmVyYXRlZCc6IG9iamVjdC5UaW1lR2VuZXJhdGVkLnN0cmZ0aW1lKCIlWS0lbS0lZC0lSDolTTolUyIpLCAKCQkJCSdzb3VyY2VuYW1lJzogb2JqZWN0LlNvdXJjZU5hbWUsIAoJCQkJJ2V2ZW50aWQnOiBmaXhFdmVudElkKG9iamVjdC5FdmVudElEKSwKCQkJCSdldmVudHR5cGUnOiBnZXRFdmVudFZhbHVlVG9TdHJpbmcob2JqZWN0LkV2ZW50VHlwZSksCgkJCQknbWVzc2FnZSc6IHdpbjMyZXZ0bG9ndXRpbC5TYWZlRm9ybWF0TWVzc2FnZShvYmplY3QsIGxvZykKCQkJfQoJcmV0dXJuKGV2ZW50RGljdCkKCmRlZiByZWFkRXhpc3RpbmdMb2dKc29uKGxvZyk6CglldmVudERpY3RGaWxlID0gZid7ZmlsZXNEaXJ9ZXZlbnRzLXtsb2d9Lmpzb24nCglsb2dnZXIuaW5mbyhmJ0NoZWNraW5nIHRvIHNlZSBpZiB7ZXZlbnREaWN0RmlsZX0gZXhpc3RzLi4uJykKCWlmIG9zLnBhdGguaXNmaWxlKGV2ZW50RGljdEZpbGUpOgoJCWxvZ2dlci5pbmZvKGYne2V2ZW50RGljdEZpbGV9IGV4aXN0cy4gUmVhZGluZyBkYXRhLi4uJykKCQl3aXRoIG9wZW4oZXZlbnREaWN0RmlsZSwgJ3InKSBhcyBmOgoJCQlldmVudERpY3QgPSBqc29uLmxvYWQoZikKCQlsb2dnZXIuaW5mbyhmJ2V2ZW50RGljdCByZWFkIGZyb20gZmlsZS4nKQoJZWxzZToKCQlsb2dnZXIuaW5mbyhmJ3tldmVudERpY3RGaWxlfSBkb2VzIG5vdCBleGlzdC4gQ3JlYXRpbmcgZW1wdHkgZXZlbnREaWN0Li4uJykKCQlldmVudERpY3QgPSB7fQoJcmV0dXJuKGV2ZW50RGljdCkKCmRlZiB3cml0ZUxvZ0pzb24oZXZlbnREaWN0LCBsb2cpOgoJZXZlbnREaWN0RmlsZSA9IGYne2ZpbGVzRGlyfWV2ZW50cy17bG9nfS5qc29uJwoJd2l0aCBvcGVuKGV2ZW50RGljdEZpbGUsICd3JykgYXMgZjoKCQlmLndyaXRlKGpzb24uZHVtcHMoZXZlbnREaWN0LCBpbmRlbnQ9NCkpCgpkZWYgd3JpdGVSZWNvcmRTdGFydFBvaW50KGxvZyk6CglsYXRlc3RFdnRGaWxlCQk9IGYne2NvbmZpZ0Rpcn1sYXRlc3RFdnQte2xvZ30udHh0JwoJb2JqZWN0TGlzdCAJCQk9IFtdCgloCQkJCQk9IHdpbjMyZXZ0bG9nLk9wZW5FdmVudExvZyhOb25lLCBsb2cpCglsb2dnZXIuZGVidWcoZidudW1iZXIgb2YgcmVjb3Jkczoge3dpbjMyZXZ0bG9nLkdldE51bWJlck9mRXZlbnRMb2dSZWNvcmRzKGgpfScpCgl3aGlsZSBUcnVlOgoJCW9iamVjdHMgCT0gd2luMzJldnRsb2cuUmVhZEV2ZW50TG9nKGgsIHdpbjMyZXZ0bG9nLkVWRU5UTE9HX0JBQ0tXQVJEU19SRUFEfHdpbjMyZXZ0bG9nLkVWRU5UTE9HX1NFUVVFTlRJQUxfUkVBRCwgMCkKCQlpZiBub3Qgb2JqZWN0czoKCQkJYnJlYWsKCQlmb3Igb2JqZWN0IGluIG9iamVjdHM6CgkJCW9iamVjdExpc3QuYXBwZW5kKG9iamVjdCkKCWxhdGVzdEV2ZW50ID0gb2JqZWN0TGlzdFswXS5SZWNvcmROdW1iZXIKCWxvZ2dlci5pbmZvKGYnTmV3IGxhdGVzdCBFdmVudDoge2xhdGVzdEV2ZW50fScpCgl3aXRoIG9wZW4obGF0ZXN0RXZ0RmlsZSwgJ3cnKSBhcyBmOgoJCWYud3JpdGUoZid7bGF0ZXN0RXZlbnR9JykKCXJldHVybihsYXRlc3RFdmVudCkKCmRlZiBnZXRMYXRlc3RFdmVudChsYXRlc3RFdnRGaWxlKToKCWxvZ2dlci5kZWJ1ZyhmJ0dldHRpbmcgbGF0ZXN0IGV2ZW50IGZyb20ge2xhdGVzdEV2dEZpbGV9Li4uJykKCWlmIG5vdCBvcy5wYXRoLmlzZmlsZShsYXRlc3RFdnRGaWxlKToKCQlsb2dnZXIuaW5mbyhmJ2xhdGVzdEV2dEZpbGU6IHtsYXRlc3RFdnRGaWxlfSBkb2VzIG5vdCBleGlzdC4gU2V0dGluZyBuZXcgc3RhcnQgcG9pbnQuJykKCQlsYXRlc3RFdmVudCA9IDAKCWVsc2U6CgkJd2l0aCBvcGVuKGxhdGVzdEV2dEZpbGUsICdyJykgYXMgZjoKCQkJbGF0ZXN0RXZlbnQgPSBmLnJlYWRsaW5lKCkKCWxvZ2dlci5pbmZvKGYnUHJldmlvdXMgbGF0ZXN0RXZlbnQ6IHtsYXRlc3RFdmVudH0nKQkKCXJldHVybihpbnQobGF0ZXN0RXZlbnQpKQoKZGVmIHdyaXRlTGF0ZXN0RXZlbnQobGF0ZXN0RXZlbnQsIGxvZywgb2JqZWN0TGlzdCk6CglsYXRlc3RFdnRGaWxlCQk9IGYne2NvbmZpZ0Rpcn1sYXRlc3RFdnQte2xvZ30udHh0JwoJbG9nZ2VyLmRlYnVnKGYnV3JpdGluZyBsYXRlc3QgZXZlbnQgdG8ge2xhdGVzdEV2dEZpbGV9Li4uJykKCWlmIGxlbihvYmplY3RMaXN0KSA+IDA6CgkJbGF0ZXN0RXZlbnQgPSBvYmplY3RMaXN0WzBdLlJlY29yZE51bWJlcgoJCWxvZ2dlci5pbmZvKGYnTmV3IGxhdGVzdCBFdmVudDoge2xhdGVzdEV2ZW50fScpCgkJd2l0aCBvcGVuKGxhdGVzdEV2dEZpbGUsICd3JykgYXMgZjoKCQkJZi53cml0ZShmJ3tsYXRlc3RFdmVudH0nKQoJZWxzZToKCQlsb2dnZXIuaW5mbygnTm8gbmV3IGV2ZW50cy4nKQoJCWxvZ2dlci5pbmZvKGYnTmV3IGxhdGVzdCBFdmVudDoge2xhdGVzdEV2ZW50fSAoTm8gY2hhbmdlKScpCQoKZGVmIHNlbmRQYXlsb2FkRmxhc2socm91dGUsIG91dFppcEZpbGUsIGRldmljZVV1aWQpOgoJcGF5bG9hZE5hbWUgCT0gb3MucGF0aC5iYXNlbmFtZShvdXRaaXBGaWxlKQoJdXJsIAkJCT0gZidodHRwczovL3tob3N0fXtyb3V0ZX0nCglsb2dnZXIuaW5mbyhmJ1JlcXVlc3QgdG8gc2VuZCB7b3V0WmlwRmlsZX0gfCBwYXlsb2FkTmFtZToge3BheWxvYWROYW1lfScpCglsb2dnZXIuaW5mbyhmJ0F0dGVtcHRpbmcgdG8gY29ubmVjdCB0byB7dXJsfScpCgl3aXRoIG9wZW4ob3V0WmlwRmlsZSwgJ3JiJykgYXMgZjoKCQlmaWxlcyA9IHsnZmlsZSc6IChwYXlsb2FkTmFtZSwgZil9CgkJaGVhZGVycyA9IHsnZGV2aWNldXVpZCc6IGRldmljZVV1aWR9CgkJcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwgZmlsZXM9ZmlsZXMsIGhlYWRlcnM9aGVhZGVycykKCQlpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CgkJCWxvZ2dlci5pbmZvKGYnc3RhdHVzX2NvZGU6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0nKQoJCQlyZXR1cm4oVHJ1ZSkKCQllbHNlOgoJCQlsb2dnZXIuZXJyb3IoZidzdGF0dXNfY29kZToge3Jlc3BvbnNlLnN0YXR1c19jb2RlfS4gUmVhc29uOiB7cmVzcG9uc2UudGV4dH0nKQoJCQlyZXR1cm4oRmFsc2UpCgpkZWYgaXNKb3VybmFsVXNlZCgpOgoJbGludXhMb2dzTGlzdCA9IFsnYXV0aCcsICdrZXJuJywgJ3N5c2xvZyddCglqb3VybmFsVXNlZCA9IFRydWUKCWZvciBsaW51eExvZyBpbiBsaW51eExvZ3NMaXN0OgoJCWlmIGxpbnV4TG9nID09ICdzeXNsb2cnOgoJCQlsaW51eExvZ0ZpbGUgCT0gZicvdmFyL2xvZy97bGludXhMb2d9JwoJCWVsc2U6CgkJCWxpbnV4TG9nRmlsZSAJCT0gZicvdmFyL2xvZy97bGludXhMb2d9LmxvZycJCgkJaWYgb3MucGF0aC5pc2ZpbGUobGludXhMb2cpOgoJCQlqb3VybmFsVXNlZCA9IEZhbHNlCglyZXR1cm4oam91cm5hbFVzZWQpCgpkZWYgZm9ybWF0Sm91cm5hbERhdGUoam91cm5hbERhdGUpOgoJZGF0ZU9iaiA9IGRhdGV0aW1lLmRhdGV0aW1lLnN0cnB0aW1lKGpvdXJuYWxEYXRlLCAiJVktJW0tJWQgJUg6JU06JVMiKQojCWxvZ2dlci5kZWJ1ZyhmJ2RhdGVPYmo6IHtkYXRlT2JqfScpCglub3cgCT0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkKCWlmIGRhdGVPYmoubW9udGggPiBub3cubW9udGg6CgkJeWVhciA9IG5vdy55ZWFyIC0gMSAgIyBqb3VybmFsRGF0ZSBpcyBmcm9tIHRoZSBwcmV2aW91cyB5ZWFyCgllbHNlOgoJCXllYXIgPSBub3cueWVhciAgIyBqb3VybmFsRGF0ZSBpcyBmcm9tIHRoZSBjdXJyZW50IHllYXIKCWpvdXJuYWxEYXRlU3RkID0gZGF0ZU9iai5yZXBsYWNlKHllYXI9eWVhcikuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKIwlmb3JtYXR0ZWRfZGF0ZSA9IGRhdGVfb2JqLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCglyZXR1cm4oam91cm5hbERhdGVTdGQpCgpkZWYgd3JpdGVMYXN0Sm91cm5hbChsYXN0Sm91cm5hbEVwb2NoKToKCWxhc3RKb3VybmFsRXBvY2hGaWxlID0gb3MucGF0aC5qb2luKGNvbmZpZ0RpciwgJ2xhdGVzdEpvdXJuYWwudHh0JykKCWxvZ2dlci5pbmZvKGYnV3JpdGluZyB7bGFzdEpvdXJuYWxFcG9jaH0gdG8ge2xhc3RKb3VybmFsRXBvY2hGaWxlfScpCgl3aXRoIG9wZW4obGFzdEpvdXJuYWxFcG9jaEZpbGUsICd3JykgYXMgZjoKCQlmLndyaXRlKGYne2xhc3RKb3VybmFsRXBvY2h9JykKCmRlZiBnZXRMYXN0Sm91cm5hbCgpOgoJbGFzdEpvdXJuYWxFcG9jaEZpbGUgPSBvcy5wYXRoLmpvaW4oY29uZmlnRGlyLCAnbGF0ZXN0Sm91cm5hbC50eHQnKQoJaWYgb3MucGF0aC5pc2ZpbGUobGFzdEpvdXJuYWxFcG9jaEZpbGUpOgoJCWxvZ2dlci5kZWJ1ZyhmJ3tsYXN0Sm91cm5hbEVwb2NoRmlsZX0gZXhpc3RzLi4uJykKCQl3aXRoIG9wZW4obGFzdEpvdXJuYWxFcG9jaEZpbGUsICdyJykgYXMgZjoKCQkJam91cm5hbFNpbmNlID0gZi5yZWFkKCkKCQlsb2dnZXIuZGVidWcoZidqb3VybmFsU2luY2U6IHtqb3VybmFsU2luY2V9JykKCWVsc2U6CgkJam91cm5hbFNpbmNlID0gaW50KHRpbWUudGltZSgpIC0gKDYwICogNjAgKiAyNCAqIDcpKQoJcmV0dXJuKGpvdXJuYWxTaW5jZSkKCmRlZiBwcm9jZXNzTGludXhKb3VybmFsKGRheXMpOgoJbGludXhMb2cJCQk9ICdqb3VybmFsJwoJbGludXhsb2dEaWN0IAkJPSB7fQojCXN0YXJ0RGF0ZSAJCQk9IChkYXRldGltZS5kYXRldGltZS5ub3coKSAtIGRhdGV0aW1lLnRpbWVkZWx0YShkYXlzPWRheXMpKS5zdHJmdGltZSgnJVktJW0tJWQnKQoJc3RhcnREYXRlCQkJPSBnZXRMYXN0Sm91cm5hbCgpCglsYXN0Sm91cm5hbEVwb2NoCT0gaW50KHRpbWUudGltZSgpKQoJY29tbWFuZCAJCQk9IFsiam91cm5hbGN0bCIsICItLXNpbmNlIiwgZidAe3N0YXJ0RGF0ZX0nLCAnLS1uby1wYWdlciddCglwcm9jZXNzIAkJCT0gc3VicHJvY2Vzcy5Qb3Blbihjb21tYW5kLCBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLCBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFLCB0ZXh0PVRydWUpCglvdXRwdXQsIFwKCQllcnJvciAJCQk9IHByb2Nlc3MuY29tbXVuaWNhdGUoKQoJaWYgcHJvY2Vzcy5yZXR1cm5jb2RlICE9IDA6CgkJbG9nZ2VyLmVycm9yKGYiRXJyb3IgcnVubmluZyBqb3VybmFsY3RsOiB7ZXJyb3J9IikKCQlyZXR1cm4gW10KCWVsc2U6CgkJbG9nZ2VyLmluZm8oZidQcm9jZXNzaW5nOiBqb3VybmFsLi4uJykKCWkgPSAwCglmb3IgbGluZSBpbiBvdXRwdXQuc3BsaXRsaW5lcygpOgoJCWxpbnV4bG9nRGljdFtpXSA9IHt9CgkJaWYgbm90IGxpbmVbMF0uaXNhbHBoYSgpOgoJCQlwYXNzCgkJZWxzZToKCQkJcGFydHMgCQkJPSBsaW5lLnNwbGl0KCcgJykKCQkJam91cm5hbERhdGUgCT0gZGF0ZXRpbWUuZGF0ZXRpbWUuc3RycHRpbWUoZid7cGFydHNbMF19IHtwYXJ0c1sxXX0ge3BhcnRzWzJdfScsICIlYiAlZCAlSDolTTolUyIpCgkJCWpvdXJuYWxEYXRlU3RkCT0gZm9ybWF0Sm91cm5hbERhdGUoc3RyKGpvdXJuYWxEYXRlKSkKCQkJcHJvY2VzcyAJPSBwYXJ0c1s0XS5zcGxpdCgnOicpWzBdCgkJCW1lc3NhZ2UgCT0gJyAnLmpvaW4ocGFydHNbNTpdKS5zdHJpcCgpCgkJCWxpbnV4bG9nRGljdFtpXVsndGltZWdlbmVyYXRlZCddIAk9IGpvdXJuYWxEYXRlU3RkCgkJCWxpbnV4bG9nRGljdFtpXVsnc291cmNlbmFtZSddIAkJPSBwcm9jZXNzCgkJCWxpbnV4bG9nRGljdFtpXVsnbWVzc2FnZSddIAkJCT0gbWVzc2FnZQoJCQlpICs9IDEKCQkJCglsaW51eExvZ0pzb25GaWxlCT0gb3MucGF0aC5qb2luKGZpbGVzRGlyLCBmJ3tsaW51eExvZ30uanNvbicpCgl3aXRoIG9wZW4obGludXhMb2dKc29uRmlsZSwgJ3cnKSBhcyBmOgoJCWYud3JpdGUoanNvbi5kdW1wcyhsaW51eGxvZ0RpY3QsIGluZGVudD00LCBkZWZhdWx0PXN0cikpCglvdXRaaXBGaWxlIAkJCT0gemlwRmlsZShmJ3tsaW51eExvZ30uanNvbicpCgl1cGxvYWRTdWNjZXNzIAkJPSBzZW5kUGF5bG9hZEZsYXNrKHJvdXRlLCBvdXRaaXBGaWxlLCBkZXZpY2VVdWlkKQoJaWYgdXBsb2FkU3VjY2VzcyA9PSBUcnVlOgoJCXdyaXRlTGFzdEpvdXJuYWwobGFzdEpvdXJuYWxFcG9jaCkKCQlkZWxGaWxlKG91dFppcEZpbGUpCgllbHNlOgoJCWxvZ2dlci5lcnJvcihmJ1VwbG9hZCBmYWlsZWQuJykKCWZpbHRlcmVkbGludXhsb2dEaWN0IAk9IGZpbHRlckxpbnV4TG9nKGxpbnV4TG9nKQoJZXZlbnRzIAkJCQkJPSBmaWx0ZXJlZGxpbnV4bG9nRGljdFsiU291cmNlcyJdWyJUb3BFdmVudHMiXQoJdG90YWxDb3VudCAJCQkJPSBzdW0oZXZlbnRbIkNvdW50Il0gZm9yIGV2ZW50IGluIGV2ZW50cykKCWZpbHRlcmVkbGludXhsb2dEaWN0WydTb3VyY2VzJ11bJ1RvdGFsRXZlbnRzJ10gPSB0b3RhbENvdW50Cglsb2dnZXIuZGVidWcoanNvbi5kdW1wcyhmaWx0ZXJlZGxpbnV4bG9nRGljdCwgaW5kZW50PTQpKQoJd2l0aCBvcGVuKG9zLnBhdGguam9pbihmaWxlc0RpciwgZid7bGludXhMb2d9RmlsdGVyZWQuanNvbicpLCAndycpIGFzIGY6CgkJZi53cml0ZShqc29uLmR1bXBzKGZpbHRlcmVkbGludXhsb2dEaWN0LCBpbmRlbnQ9NCkpCglzZW5kTGludXhMb2dNZXRhZGF0YShkZXZpY2VVdWlkLCBsaW51eExvZykKCWlmIGRlYnVnTW9kZSA9PSBUcnVlOgoJCWxvZ2dlci5kZWJ1ZyhmJ3tqc29uLmR1bXBzKGxpbnV4bG9nRGljdCwgaW5kZW50PTQpfScpCQoKZGVmIGZpbHRlckxpbnV4TG9nKGxvZ1R5cGUpOgoJZ3JvdXBlZERhdGEgPSB7fQoJanNvbkZpbGUgCT0gb3MucGF0aC5qb2luKGZpbGVzRGlyLCBmJ3tsb2dUeXBlfS5qc29uJykKCWxvZ2dlci5pbmZvKGYnRmlsdGVyaW5nIHtqc29uRmlsZX0nKQoJZGF0YSAJCT0gcmVhZEV2ZW50SnNvbihqc29uRmlsZSkKCglmb3IgcmVjb3JkX2lkLCByZWNvcmQgaW4gZGF0YS5pdGVtcygpOgoJCXRpbWVHZW5lcmF0ZWQgCT0gKHJlY29yZFsidGltZWdlbmVyYXRlZCJdKQoJCW1lc3NhZ2UgCQk9IHJlY29yZFsibWVzc2FnZSJdCgkJc291cmNlTmFtZSAJCT0gcmVjb3JkWydzb3VyY2VuYW1lJ10KCgkJaWYgc291cmNlTmFtZSBub3QgaW4gZ3JvdXBlZERhdGE6CgkJCWdyb3VwZWREYXRhW3NvdXJjZU5hbWVdID0gewoJCQkJImNvdW50IjogMCwKCQkJCSJtZXNzYWdlIjogbWVzc2FnZSwKCQkJCSJtb3N0cmVjZW50dGltZSI6IHRpbWVHZW5lcmF0ZWQKCQkJfQoJCWdyb3VwZWREYXRhW3NvdXJjZU5hbWVdWyJjb3VudCJdICs9IDEKCQlpZiB0aW1lR2VuZXJhdGVkID4gZ3JvdXBlZERhdGFbc291cmNlTmFtZV1bIm1vc3RyZWNlbnR0aW1lIl06CgkJCWdyb3VwZWREYXRhW3NvdXJjZU5hbWVdWyJtb3N0cmVjZW50dGltZSJdID0gdGltZUdlbmVyYXRlZAoJZWxzZToKCQlwYXNzCglmb3Igc291cmNlTmFtZSwgZGV0YWlscyBpbiBncm91cGVkRGF0YS5pdGVtcygpOgoJCWRldGFpbHNbIm1vc3RyZWNlbnR0aW1lIl0gPSBkZXRhaWxzWyJtb3N0cmVjZW50dGltZSJdICMgLnN0cmZ0aW1lKCIlWS0lbS0lZC0lSDolTTolUyIpCgoJc29ydGVkR3JvdXBlZERhdGEgPSBzb3J0ZWQoZ3JvdXBlZERhdGEuaXRlbXMoKSwga2V5PWxhbWJkYSB4OiB4WzFdWyJjb3VudCJdLCByZXZlcnNlPVRydWUpWzoxMF0KCgl0b3BFdmVudHMgPSBbXQoJZm9yIHNvdXJjZU5hbWUsIGRldGFpbHMgaW4gc29ydGVkR3JvdXBlZERhdGE6CgkJY3VycmVudFRvcEV2ZW50ID0gewoJCQknTWVzc2FnZSc6IGRldGFpbHNbJ21lc3NhZ2UnXSwgCgkJCSdTb3VyY2VOYW1lJzogc291cmNlTmFtZSwKCQkJJ0NvdW50JzogZGV0YWlsc1snY291bnQnXSwgCgkJCSdMYXRlc3RPY2N1cnJlbmNlJzpkZXRhaWxzWydtb3N0cmVjZW50dGltZSddCgkJCX0KCQl0b3BFdmVudHMuYXBwZW5kKGN1cnJlbnRUb3BFdmVudCkKCglmaWx0ZXJlZFN5c2xvZ0RpY3QJCQkJCQkJPSB7fQoJZmlsdGVyZWRTeXNsb2dEaWN0WydMb2dOYW1lJ10gCQkJCT0gbG9nVHlwZQoJZmlsdGVyZWRTeXNsb2dEaWN0WydTb3VyY2VzJ10gCQkJCT0ge30KCWZpbHRlcmVkU3lzbG9nRGljdFsnU291cmNlcyddWydUb3BFdmVudHMnXSAJPSB0b3BFdmVudHMKCWZpbHRlcmVkU3lzbG9nRGljdFsnU291cmNlcyddWydUb3RhbEV2ZW50cyddID0gMTAKCWlmIGRlYnVnTW9kZSA9PSBUcnVlOgoJCWxvZ2dlci5kZWJ1ZyhmJ2ZpbHRlcmVkU3lzbG9nRGljdDpcbntqc29uLmR1bXBzKGZpbHRlcmVkU3lzbG9nRGljdCwgaW5kZW50PTQpfScpCglyZXR1cm4oZmlsdGVyZWRTeXNsb2dEaWN0KQoKZGVmIHByb2Nlc3NMaW51eExvZ3MoZGF5cyk6CglsaW51eExvZ3NMaXN0ID0gWydhdXRoJywgJ2tlcm4nLCAnc3lzbG9nJ10KCWZvciBsaW51eExvZyBpbiBsaW51eExvZ3NMaXN0OgoJCWlmIGxpbnV4TG9nID09ICdzeXNsb2cnOgoJCQlsaW51eExvZ0ZpbGUgCT0gZicvdmFyL2xvZy97bGludXhMb2d9JwoJCWVsc2U6CgkJCWxpbnV4TG9nRmlsZSAJCT0gZicvdmFyL2xvZy97bGludXhMb2d9LmxvZycKCQlpZiBvcy5wYXRoLmlzZmlsZShsaW51eExvZ0ZpbGUpOgoJCQlsb2dnZXIuaW5mbyhmJ1Byb2Nlc3Npbmc6IHtsaW51eExvZ0ZpbGV9JykKCQkJbm93IAkJCQk9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpCgkJCXRoaXJ0eURheXNBZ28JCT0gbm93IC0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9ZGF5cykKCQkJbGludXhsb2dEaWN0IAkJPSB7fQoJCQl3aXRoIG9wZW4obGludXhMb2dGaWxlLCAncicsIGVuY29kaW5nPSd1dGYtOCcsIGVycm9ycz0naWdub3JlJykgYXMgZjoKCQkJCWkgPSAwCgkJCQlmb3IgbGluZSBpbiBmLnJlYWRsaW5lcygpOgoJCQkJCWxpbnV4bG9nRGljdFtpXSA9IHt9CgkJCQkJcGFydHMgPSBsaW5lLnJlcGxhY2UoJyAgJywgJyAnKS5zcGxpdCgnICcpCgkJCQkJaWYgbGVuKHBhcnRzWzBdKSA+IDM6CgkJCQkJCWV2ZW50VGltZSAJPSBnZXREYXRlRm9ybWF0KHBhcnRzWzBdKQoJCQkJCQlpZiBldmVudFRpbWUgPCB0aGlydHlEYXlzQWdvOgoJCQkJCQkJcGFzcwoJCQkJCQllbHNlOgoJCQkJCQkJZGV2aWNlTmFtZSAJPSBwYXJ0c1sxXQoJCQkJCQkJcHJvY2VzcyAJPSBwYXJ0c1syXS5zcGxpdCgnWycpWzBdCgkJCQkJCQltZXNzYWdlIAk9ICcgJy5qb2luKHBhcnRzWzM6XSkuc3RyaXAoKQoJCQkJCWVsc2U6CgkJCQkJCWV2ZW50VGltZSAJPSBnZXREYXRlRm9ybWF0KGYne3BhcnRzWzBdfSB7cGFydHNbMV19IHtwYXJ0c1syXX0nKQoJCQkJCQlpZiBldmVudFRpbWUgPCB0aGlydHlEYXlzQWdvOgoJCQkJCQkJcHJpbnQoZid0b28gb2xkOiB7ZXZlbnRUaW1lfScpCgkJCQkJCWVsc2U6CQkJCgkJCQkJCQlkZXZpY2VOYW1lIAk9IHBhcnRzWzNdCgkJCQkJCQlwcm9jZXNzIAk9IHBhcnRzWzRdLnNwbGl0KCdbJylbMF0KCQkJCQkJCW1lc3NhZ2UgCT0gJyAnLmpvaW4ocGFydHNbNTpdKS5zdHJpcCgpCgkJCQkJCQlsaW51eGxvZ0RpY3RbaV1bJ3RpbWVnZW5lcmF0ZWQnXSAJPSBldmVudFRpbWUKCQkJCQkJCWxpbnV4bG9nRGljdFtpXVsnc291cmNlbmFtZSddIAkJPSBwcm9jZXNzCgkJCQkJCQlsaW51eGxvZ0RpY3RbaV1bJ21lc3NhZ2UnXSAJCQk9IG1lc3NhZ2UKCQkJCQkJCWkgKz0gMQoJCWVsc2U6CgkJCWxvZ2dlci53YXJuaW5nKGYne2xpbnV4TG9nRmlsZX0gZG9lcyBub3QgZXhpc3QuIFNraXBwaW5nJykKCWxpbnV4TG9nSnNvbkZpbGUJPSBvcy5wYXRoLmpvaW4oZmlsZXNEaXIsIGYne2xpbnV4TG9nfS5qc29uJykKCXdpdGggb3BlbihsaW51eExvZ0pzb25GaWxlLCAndycpIGFzIGY6CgkJZi53cml0ZShqc29uLmR1bXBzKGxpbnV4bG9nRGljdCwgaW5kZW50PTQsIGRlZmF1bHQ9c3RyKSkKCW91dFppcEZpbGUgCQkJPSB6aXBGaWxlKGYne2xpbnV4TG9nfS5qc29uJykKCXVwbG9hZFN1Y2Nlc3MgCQk9IHNlbmRQYXlsb2FkRmxhc2socm91dGUsIG91dFppcEZpbGUsIGRldmljZVV1aWQpCglpZiB1cGxvYWRTdWNjZXNzID09IFRydWU6CgkJZGVsRmlsZShvdXRaaXBGaWxlKQoJZWxzZToKCQlsb2dnZXIuZXJyb3IoZidVcGxvYWQgZmFpbGVkLicpCglmaWx0ZXJlZGxpbnV4bG9nRGljdCAJPSBmaWx0ZXJMaW51eExvZyhsaW51eExvZykKCWV2ZW50cyAJCQkJCT0gZmlsdGVyZWRsaW51eGxvZ0RpY3RbIlNvdXJjZXMiXVsiVG9wRXZlbnRzIl0KCXRvdGFsQ291bnQgCQkJCT0gc3VtKGV2ZW50WyJDb3VudCJdIGZvciBldmVudCBpbiBldmVudHMpCglmaWx0ZXJlZGxpbnV4bG9nRGljdFsnU291cmNlcyddWydUb3RhbEV2ZW50cyddID0gdG90YWxDb3VudAoJbG9nZ2VyLmRlYnVnKGpzb24uZHVtcHMoZmlsdGVyZWRsaW51eGxvZ0RpY3QsIGluZGVudD00KSkKCXdpdGggb3Blbihvcy5wYXRoLmpvaW4oZmlsZXNEaXIsIGYne2xpbnV4TG9nfUZpbHRlcmVkLmpzb24nKSwgJ3cnKSBhcyBmOgoJCWYud3JpdGUoanNvbi5kdW1wcyhmaWx0ZXJlZGxpbnV4bG9nRGljdCwgaW5kZW50PTQpKQoJc2VuZExpbnV4TG9nTWV0YWRhdGEoZGV2aWNlVXVpZCwgbGludXhMb2cpCgoKZGVmIGdldEFwcERpcnMoKToKCWlmIHBsYXRmb3JtLnN5c3RlbSgpID09ICdXaW5kb3dzJzoKCQlhcHBEaXIgCQk9ICdjOlxccHJvZ3JhbSBmaWxlcyAoeDg2KVxcV2Vnd2Vpc2VyXFwnCgkJbG9nRGlyIAkJPSBmJ3thcHBEaXJ9TG9nc1xcJwoJCWNvbmZpZ0RpciAJPSBmJ3thcHBEaXJ9Q29uZmlnXFwnCgkJdGVtcERpciAJPSBvcy5nZXRlbnYoJ1RFTVAnKQoJCWZpbGVzRGlyCT0gZid7YXBwRGlyfUZpbGVzXFwnCgllbHNlOgoJCWFwcERpciAJCT0gJy9vcHQvV2Vnd2Vpc2VyLycKCQlsb2dEaXIgCQk9IGYne2FwcERpcn1Mb2dzLycKCQljb25maWdEaXIgCT0gZid7YXBwRGlyfUNvbmZpZy8nCgkJZmlsZXNEaXIJPSBmJ3thcHBEaXJ9RmlsZXMvJwoJCXRlbXBEaXIgCT0gb3MuZ2V0ZW52KCdUTVBESVInKSBvciBvcy5nZXRlbnYoJ1RFTVAnKSBvciBvcy5nZXRlbnYoJ1RNUCcpIG9yICcvdG1wJwoJY2hlY2tEaXIoYXBwRGlyKQoJY2hlY2tEaXIobG9nRGlyKQoJY2hlY2tEaXIoY29uZmlnRGlyKQoJY2hlY2tEaXIodGVtcERpcikKCWNoZWNrRGlyKGZpbGVzRGlyKQoJcmV0dXJuKGFwcERpciwgbG9nRGlyLCBjb25maWdEaXIsIHRlbXBEaXIsIGZpbGVzRGlyKQoKZGVmIGNoZWNrRGlyKGRpclRvQ2hlY2spOgoJZGlyVG9DaGVjayA9IG9zLnBhdGguam9pbihkaXJUb0NoZWNrLCAnJykKCWlmIG5vdCBvcy5wYXRoLmlzZGlyKGRpclRvQ2hlY2spOgoJCWxvZ2dlci5pbmZvKGYne2RpclRvQ2hlY2t9IGRvZXMgbm90IGV4aXN0LiBDcmVhdGluZy4uLicpCgkJdHJ5OgoJCQlvcy5tYWtlZGlycyhkaXJUb0NoZWNrKQoJCQlsb2dnZXIuaW5mbyhmJ3tkaXJUb0NoZWNrfSBjcmVhdGVkLicpCgkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQlsb2dnZXIuZXJyb3IoZidGYWlsZWQgdG8gY3JlYXRlIHtkaXJUb0NoZWNrfS4gUmVhc29uOiB7ZX0nKQoJCQlzeXMuZXhpdCgpCglyZXR1cm4oZGlyVG9DaGVjaykKCmRlZiB6aXBGaWxlKGZpbGVUb1ppcCk6CglpbXBvcnQgemlwZmlsZQoJaW5GaWxlIAkJPSBmJ3tmaWxlc0Rpcn17ZmlsZVRvWmlwfScKCW91dFppcEZpbGUgCT0gZid7ZmlsZXNEaXJ9e2ZpbGVUb1ppcH0uemlwJwoJbG9nZ2VyLmluZm8oZidaaXBwaW5nIHtpbkZpbGV9IHRvIHtvdXRaaXBGaWxlfScpCgl3aXRoIHppcGZpbGUuWmlwRmlsZShvdXRaaXBGaWxlLCAndycsIGNvbXByZXNzaW9uPXppcGZpbGUuWklQX0RFRkxBVEVEKSBhcyB6aXBmOgoJCXppcGYud3JpdGUoaW5GaWxlLCBvcy5wYXRoLmJhc2VuYW1lKGluRmlsZSkpCglsb2dnZXIuaW5mbyhmJ1N1Y2Nlc3NmdWxseSB6aXBwZWQge2luRmlsZX0gdG8ge291dFppcEZpbGV9JykKCXJldHVybihvdXRaaXBGaWxlKQoKZGVmIGdldERldmljZVV1aWQoY29uZmlnRmlsZSk6Cglsb2dnZXIuaW5mbyhmJ0F0dGVtcHRpbmcgdG8gcmVhZCBjb25maWcgZmlsZToge2NvbmZpZ0ZpbGV9Li4uJykKCWlmIG9zLnBhdGguaXNmaWxlKGNvbmZpZ0ZpbGUpOgoJCXRyeToKCQkJd2l0aCBvcGVuKGNvbmZpZ0ZpbGUsICdyJykgYXMgZjoKCQkJCWNvbmZpZ0RpY3QgPSBqc29uLmxvYWQoZikKCQkJbG9nZ2VyLmluZm8oZidTdWNjZXNzZnVsbHkgcmVhZCB7Y29uZmlnRmlsZX0nKQoJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJbG9nZ2VyLmVycm9yKGYnRmFpbGVkIHRvIHJlYWQge2NvbmZpZ0ZpbGV9JykKCQkJcXVpdCgnUXVpdHRpbmcuJykKCQlkZXZpY2VVdWlkIAk9IGNvbmZpZ0RpY3RbJ2RldmljZXV1aWQnXQoJCWlmICdzZXJ2ZXJBZGRyJyBpbiBjb25maWdEaWN0OgoJCQlob3N0CQk9IGNvbmZpZ0RpY3RbJ3NlcnZlckFkZHInXQoJCWVsc2U6CgkJCWhvc3QgCT0gJ3N0YWdpbmcud2Vnd2Vpc2VyLnRlY2gnCglyZXR1cm4oZGV2aWNlVXVpZCwgaG9zdCkKCmRlZiBkZWxGaWxlKGZpbGVUb0RlbGV0ZSk6Cglsb2dnZXIuaW5mbyhmJ0F0dGVtcHRpbmcgdG8gZGVsZXRlIHtmaWxlVG9EZWxldGV9Li4uJykKCXRyeToKCQlvcy5yZW1vdmUoZmlsZVRvRGVsZXRlKQoJCWxvZ2dlci5pbmZvKGYnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQge2ZpbGVUb0RlbGV0ZX0uJykKCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQlsb2dnZXIuZXJyb3IoZidGYWlsZWQgdG8gZGVsZXRlIHtmaWxlVG9EZWxldGV9LiBSZWFzb246IHtlfScpCgpkZWYgZmlsdGVyRXZlbnRMb2cobG9nTmFtZSk6Cglncm91cGVkRGF0YSA9IHt9Cglqc29uRmlsZSAJPSBvcy5wYXRoLmpvaW4oZmlsZXNEaXIsIGYnZXZlbnRzLXtsb2dOYW1lfS5qc29uJykKCWRhdGEgCQk9IHJlYWRFdmVudEpzb24oanNvbkZpbGUpCgoJZm9yIHJlY29yZF9pZCwgcmVjb3JkIGluIGRhdGEuaXRlbXMoKToKCQlldmVudElkIAkJPSByZWNvcmRbImV2ZW50aWQiXQoJCXRpbWVHZW5lcmF0ZWQgCT0gcGFyc2VUaW1lKHJlY29yZFsidGltZWdlbmVyYXRlZCJdKQoJCW1lc3NhZ2UgCQk9IHJlY29yZFsibWVzc2FnZSJdCgkJbGV2ZWwgCQkJPSByZWNvcmRbJ2V2ZW50dHlwZSddCgkJaWYgKGxldmVsID09ICdXQVJOSU5HJykgb3IgKGxldmVsID09ICdFUlJPUicpIG9yIChsb2dOYW1lID09ICdTZWN1cml0eScpOgoJCQlpZiBldmVudElkIG5vdCBpbiBncm91cGVkRGF0YToKCQkJCWdyb3VwZWREYXRhW2V2ZW50SWRdID0gewoJCQkJCSJjb3VudCI6IDAsCgkJCQkJIm1lc3NhZ2UiOiBtZXNzYWdlLAoJCQkJCSJtb3N0cmVjZW50dGltZSI6IHRpbWVHZW5lcmF0ZWQsCgkJCQkJImxldmVsIjogbGV2ZWwKCQkJCX0KCQkJZ3JvdXBlZERhdGFbZXZlbnRJZF1bImNvdW50Il0gKz0gMQoJCQlpZiB0aW1lR2VuZXJhdGVkID4gZ3JvdXBlZERhdGFbZXZlbnRJZF1bIm1vc3RyZWNlbnR0aW1lIl06CgkJCQlncm91cGVkRGF0YVtldmVudElkXVsibW9zdHJlY2VudHRpbWUiXSA9IHRpbWVHZW5lcmF0ZWQKCQllbHNlOgoJCQlwYXNzCiMJbG9nZ2VyLmRlYnVnKGYnZ3JvdXBlZERhdGE6IHtncm91cGVkRGF0YX0nKQoJZm9yIGV2ZW50SWQsIGRldGFpbHMgaW4gZ3JvdXBlZERhdGEuaXRlbXMoKToKCQlkZXRhaWxzWyJtb3N0cmVjZW50dGltZSJdID0gZGV0YWlsc1sibW9zdHJlY2VudHRpbWUiXS5zdHJmdGltZSgiJVktJW0tJWQtJUg6JU06JVMiKQoKCXNvcnRlZEdyb3VwZWREYXRhID0gc29ydGVkKGdyb3VwZWREYXRhLml0ZW1zKCksIGtleT1sYW1iZGEgeDogeFsxXVsiY291bnQiXSwgcmV2ZXJzZT1UcnVlKVs6MTBdCgoJdG9wRXZlbnRzID0gW10KCWZvciBldmVudElkLCBkZXRhaWxzIGluIHNvcnRlZEdyb3VwZWREYXRhOgoJCWN1cnJlbnRUb3BFdmVudCA9IHsKCQkJJ01lc3NhZ2UnOmRldGFpbHNbJ21lc3NhZ2UnXSwgCgkJCSdFdmVudElEJzogZXZlbnRJZCwgCgkJCSdMZXZlbCc6IGRldGFpbHNbJ2xldmVsJ10sIAoJCQknQ291bnQnOiBkZXRhaWxzWydjb3VudCddLCAKCQkJJ0xhdGVzdE9jY3VycmVuY2UnOmRldGFpbHNbJ21vc3RyZWNlbnR0aW1lJ10KCQkJfQoJCXRvcEV2ZW50cy5hcHBlbmQoY3VycmVudFRvcEV2ZW50KQoKCWZpbHRlcmVkRXZlbnREaWN0CQkJCQkJCT0ge30KCWZpbHRlcmVkRXZlbnREaWN0WydMb2dOYW1lJ10gCQkJCT0gbG9nTmFtZQoJZmlsdGVyZWRFdmVudERpY3RbJ1NvdXJjZXMnXSAJCQkJPSB7fQoJZmlsdGVyZWRFdmVudERpY3RbJ1NvdXJjZXMnXVsnVG9wRXZlbnRzJ10gCT0gdG9wRXZlbnRzCglmaWx0ZXJlZEV2ZW50RGljdFsnU291cmNlcyddWydUb3RhbEV2ZW50cyddID0gMTAKCXJldHVybihmaWx0ZXJlZEV2ZW50RGljdCkKCmRlZiByZWFkRXZlbnRKc29uKGpzb25GaWxlKToKICAgIHdpdGggb3Blbihqc29uRmlsZSwgJ3InKSBhcyBmOgogICAgICAgIGV2ZW50c0RpY3QgPSBqc29uLmxvYWQoZikKICAgIHJldHVybihldmVudHNEaWN0KQoKZGVmIHBhcnNlVGltZSh0aW1lU3RyKToKICAgIHJldHVybiAoZGF0ZXRpbWUuZGF0ZXRpbWUuc3RycHRpbWUodGltZVN0ciwgIiVZLSVtLSVkLSVIOiVNOiVTIikpCgpkZWYgcGFyc2VUaW1lMih0aW1lU3RyKToKICAgIHJldHVybiAoZGF0ZXRpbWUuZGF0ZXRpbWUuc3RycHRpbWUodGltZVN0ciwgIiVZLSVtLSVkICVIOiVNOiVTIikpCgpkZWYgc2VuZEV2ZW50TWV0YWRhdGEoZGV2aWNlVXVpZCk6Cgl1cmwgPSBmJ2h0dHBzOi8ve2hvc3R9L2FpL2RldmljZS9tZXRhZGF0YScKCWxvZ05hbWVzID0gWydBcHBsaWNhdGlvbicsICdTeXN0ZW0nLCAnU2VjdXJpdHknXQoJZm9yIGxvZ05hbWUgaW4gbG9nTmFtZXM6CgkJd2l0aCBvcGVuKG9zLnBhdGguam9pbihmaWxlc0RpciwgJ2V2ZW50c0ZpbHRlcmVkLScgKyBsb2dOYW1lICsnLmpzb24nKSwgJ3InKSBhcyBmOgoJCQlkYXRhID0ganNvbi5sb2FkKGYpCgkJYm9keSA9IHsKCQkJJ2RldmljZXV1aWQnOmRldmljZVV1aWQsCgkJCSdtZXRhbG9nb3NfdHlwZSc6ZidldmVudHNGaWx0ZXJlZC17bG9nTmFtZX0nLAoJCQknbWV0YWxvZ29zJzpkYXRhCgkJCX0KCQkKCQloZWFkZXJzIAk9IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfQoJCWxvZ2dlci5pbmZvKGYnQXR0ZW1wdGluZyB0byBQT1NUIHRvOiB7dXJsfScpCgkJcmVzcG9uc2UgCT0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGJvZHkpKQoJCWxvZ2dlci5pbmZvKGYncmVzcG9uc2U6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0nKQoJCWlmIHJlc3BvbnNlLnN0YXR1c19jb2RlICE9IDIwMToKCQkJbG9nZ2VyLmVycm9yKGYnRmFpbGVkIHRvIFBPU1QgZGF0YS4gUmVhc29uOiB7cmVzcG9uc2UudGV4dH0nKQoKZGVmIHNlbmRMaW51eExvZ01ldGFkYXRhKGRldmljZVV1aWQsIGxvZ1RvU2VuZCk6Cgl1cmwgPSBmJ2h0dHBzOi8ve2hvc3R9L2FpL2RldmljZS9tZXRhZGF0YScKCXdpdGggb3Blbihvcy5wYXRoLmpvaW4oZmlsZXNEaXIsIGYne2xvZ1RvU2VuZH1GaWx0ZXJlZC5qc29uJyksICdyJykgYXMgZjoKCQlkYXRhID0ganNvbi5sb2FkKGYpCglib2R5ID0gewoJCSdkZXZpY2V1dWlkJzpkZXZpY2VVdWlkLAoJCSdtZXRhbG9nb3NfdHlwZSc6Zid7bG9nVG9TZW5kfUZpbHRlcmVkJywKCQknbWV0YWxvZ29zJzpkYXRhCgkJfQoJaGVhZGVycyAJPSB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30KCWxvZ2dlci5pbmZvKGYnQXR0ZW1wdGluZyB0byBQT1NUIHRvOiB7dXJsfSBmb3Ige2xvZ1RvU2VuZH0nKQoJcmVzcG9uc2UgCT0gcmVxdWVzdHMucG9zdCh1cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGJvZHkpKQoJbG9nZ2VyLmluZm8oZidyZXNwb25zZToge3Jlc3BvbnNlLnN0YXR1c19jb2RlfScpCglpZiByZXNwb25zZS5zdGF0dXNfY29kZSAhPSAyMDE6CgkJbG9nZ2VyLmVycm9yKGYnRmFpbGVkIHRvIFBPU1QgZGF0YS4gUmVhc29uOiB7cmVzcG9uc2UudGV4dH0nKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNQUlOICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVidWdNb2RlIAkJPSBGYWxzZQpwb3J0IAkJCT0gNDQzCgphcHBEaXIsIFwKCWxvZ0RpciwgXAoJY29uZmlnRGlyLCBcCgl0ZW1wRGlyLCBcCglmaWxlc0Rpcgk9IGdldEFwcERpcnMoKQoKd2VnQ29uZmlnRmlsZSAJPSBmJ3tjb25maWdEaXJ9YWdlbnQuY29uZmlnJwpkZXZpY2VVdWlkLCBcCglob3N0CQk9IGdldERldmljZVV1aWQod2VnQ29uZmlnRmlsZSkKCnJvdXRlID0gJy9wYXlsb2FkL3NlbmRmaWxlJwppZiBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAnV2luZG93cyc6Cgl0cnk6CgkJaW1wb3J0IHdpbjMyZXZ0bG9nCglleGNlcHQ6CgkJaW1wb3J0IHBpcAoJCXBpcC5tYWluKFsnaW5zdGFsbCcsICd3aW4zMmFwaSddKQoJCWltcG9ydCB3aW4zMmV2dGxvZwoJdHJ5OgoJCWltcG9ydCB3aW4zMmV2dGxvZ3V0aWwKCWV4Y2VwdDoKCQlpbXBvcnQgcGlwCgkJcGlwLm1haW4oWydpbnN0YWxsJywgJ3dpbjMyZXZ0bG9ndXRpbCddKQoJCWltcG9ydCB3aW4zMmV2dGxvZ3V0aWwKCWxvZ0xpc3QgCQkJPSBbJ0FwcGxpY2F0aW9uJywgJ1N5c3RlbScsICdTZWN1cml0eSddCglsb2dnZXIuaW5mbygnU3RhcnRpbmcgRXZlbnQgTG9nIENvbGxlY3Rpb24nKQoJZm9yIGxvZyBpbiBsb2dMaXN0OgoJCWxhdGVzdEV2dEZpbGUJCT0gZid7Y29uZmlnRGlyfWxhdGVzdEV2dC17bG9nfS50eHQnCgkJbGF0ZXN0RXZlbnQgCQk9IGdldExhdGVzdEV2ZW50KGxhdGVzdEV2dEZpbGUpCgkJb2JqZWN0TGlzdCAJCQk9IHJlYWRMb2cobG9nKQoJCWV2ZW50RGljdAkJCT0gcmVhZEV4aXN0aW5nTG9nSnNvbihsb2cpCgkJZXZlbnREaWN0CQkJPSBwcm9jZXNzRXZlbnRzKGxvZywgb2JqZWN0TGlzdCwgZXZlbnREaWN0KQoJCXdyaXRlTG9nSnNvbihldmVudERpY3QsIGxvZykKCQl3cml0ZUxhdGVzdEV2ZW50KGxhdGVzdEV2ZW50LCBsb2csIG9iamVjdExpc3QpCgkJb3V0WmlwRmlsZSAJCQk9IHppcEZpbGUoZidldmVudHMte2xvZ30uanNvbicpCgkJdXBsb2FkU3VjY2VzcyAJCT0gc2VuZFBheWxvYWRGbGFzayhyb3V0ZSwgb3V0WmlwRmlsZSwgZGV2aWNlVXVpZCkKCQlpZiB1cGxvYWRTdWNjZXNzID09IFRydWU6CgkJCWRlbEZpbGUob3V0WmlwRmlsZSkKCQllbHNlOgoJCQlsb2dnZXIuZXJyb3IoZidVcGxvYWQgZmFpbGVkLicpCgkKCWxvZ05hbWVzID0gWydBcHBsaWNhdGlvbicsICdTeXN0ZW0nLCAnU2VjdXJpdHknXQkKCXN0YXJ0VGltZSA9IHRpbWUudGltZSgpCglmb3IgbG9nTmFtZSBpbiBsb2dOYW1lczoKCQlmaWx0ZXJlZEV2ZW50RGljdCAJPSBmaWx0ZXJFdmVudExvZyhsb2dOYW1lKQoJCWV2ZW50cyAJCQkJPSBmaWx0ZXJlZEV2ZW50RGljdFsiU291cmNlcyJdWyJUb3BFdmVudHMiXQoJCXRvdGFsQ291bnQgCQkJPSBzdW0oZXZlbnRbIkNvdW50Il0gZm9yIGV2ZW50IGluIGV2ZW50cykKCQlmaWx0ZXJlZEV2ZW50RGljdFsnU291cmNlcyddWydUb3RhbEV2ZW50cyddID0gdG90YWxDb3VudAoJCWxvZ2dlci5kZWJ1Zyhqc29uLmR1bXBzKGZpbHRlcmVkRXZlbnREaWN0LCBpbmRlbnQ9NCkpCgkJd2l0aCBvcGVuKG9zLnBhdGguam9pbihmaWxlc0RpciwgJ2V2ZW50c0ZpbHRlcmVkLScgKyBsb2dOYW1lICsnLmpzb24nKSwgJ3cnKSBhcyBmOgoJCQlmLndyaXRlKGpzb24uZHVtcHMoZmlsdGVyZWRFdmVudERpY3QsIGluZGVudD00KSkKCWxvZ2dlci5pbmZvKGYnRXZlbnRsb2cgUGFyc2UgVGltZToge3RpbWUudGltZSgpLXN0YXJ0VGltZX0gc2Vjb25kcy4nKQoJc2VuZEV2ZW50TWV0YWRhdGEoZGV2aWNlVXVpZCkKZWxzZToKCWlmIGlzSm91cm5hbFVzZWQoKSA9PSBUcnVlOgoJCXByb2Nlc3NMaW51eEpvdXJuYWwoMzEpCgllbHNlOgkKCQlwcm9jZXNzTGludXhMb2dzKDMxKQ=="}, "resigned_at": 1761308232}